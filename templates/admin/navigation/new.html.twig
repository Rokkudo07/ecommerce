{% extends 'admin/layout.html.twig' %}

{% block admin_title %}Nouvel item de navigation{% endblock %}

{% block admin_content %}
    <h1>Nouvel item de navigation</h1>

    <form method="post">
        <label>
            Label *
            <input type="text" name="label" required>
        </label>

        <label>
            Type *
            <select name="type" id="type-select" required>
                <option value="internal">Internal</option>
                <option value="external">External</option>
                <option value="dropdown_only">Dropdown only</option>
            </select>
        </label>

        <label id="url-label" style="display: block;">
            URL *
            <input type="text" name="url" placeholder="/about, /products, https://example.com">
        </label>

        <label>
            Parent
            <select name="parent">
                <option value="">Aucun (racine)</option>
                {% for parentItem in allItems %}
                    <option value="{{ parentItem.id }}">{{ parentItem.label }}</option>
                {% endfor %}
            </select>
        </label>

        <label>
            Position
            <input type="number" name="position" value="0" min="0">
        </label>

        <label>
            <input type="checkbox" name="isExternal" value="1">
            Lien externe
        </label>

        <label>
            <input type="checkbox" name="isVisible" value="1" checked>
            Visible
        </label>

        <button type="submit">Cr√©er</button>
        <a href="{{ path('admin_navigation_index') }}" class="btn">Annuler</a>
    </form>

    <script>
        document.getElementById('type-select').addEventListener('change', function() {
            const type = this.value;
            const urlLabel = document.getElementById('url-label');
            
            if (type === 'dropdown_only') {
                urlLabel.style.display = 'none';
            } else {
                urlLabel.style.display = 'block';
            }
        });
    </script>
{% endblock %}
